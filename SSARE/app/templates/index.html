<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta Tags and Links -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSARE Vector Retrieval</title>
    <!-- Fonts and Stylesheets -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <!-- HTMX Library -->
    <script src="https://unpkg.com/htmx.org@1.5.0/dist/htmx.js"></script>
    <!-- Custom Styles -->
    <style>
        body {
            background-color: #0a192f;
            color: #ffffff;
            font-family: 'Poppins', sans-serif;
        }

        .bg-card {
            background-color: #1e2a3a;
        }

        .text-fluorescent-green {
            color: #32ff7e;
        }

        .text-inactive {
            color: #ff4757;
        }

        /* Additional Styles Omitted for Brevity */
    </style>
</head>

<body class="p-6">
    <div class="container mx-auto min-w-[420px]">
        <h1 class="text-4xl font-bold text-center mb-8 min-w-[400px]">SSARE - HUB</h1>

        <div class="grid-container mb-6">
            <!-- Services' Health -->
            <div class="bg-card rounded-lg p-4 grid-item">
                <h2 class="text-xl font-semibold mb-4">Services' Health</h2>
                <div id="service-health" class="grid grid-cols-2 gap-2" hx-get="/service_health" hx-trigger="load, every 30s">
                    <!-- Service health status will be loaded here -->
                </div>
            </div>

            <!-- Search Contents -->
            <div class="bg-card rounded-lg p-4 grid-item col-span-2">
                <h2 class="text-xl font-semibold mb-4">Search Contents</h2>
                <form hx-get="/contents" hx-target="#search-results" hx-trigger="submit">
                    <div class="flex flex-col space-y-4">
                        <input class="bg-gray-700 text-white rounded px-4 py-2 focus:outline-none" type="text" name="search_query" placeholder="Search contents...">
                        
                        <div class="flex flex-wrap -mx-2">
                            <div class="w-full md:w-1/2 px-2 mb-4">
                                <fieldset class="border border-gray-600 rounded p-3">
                                    <legend class="font-semibold px-2">Search Type</legend>
                                    <div class="flex space-x-4">
                                        <label class="flex items-center">
                                            <input type="radio" name="search_type" value="text" checked class="mr-2">
                                            Text Search
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="search_type" value="semantic" class="mr-2">
                                            Semantic Search
                                        </label>
                                    </div>
                                </fieldset>
                            </div>
                            
                            <div class="w-full md:w-1/2 px-2 mb-4">
                                <fieldset class="border border-gray-600 rounded p-3">
                                    <legend class="font-semibold px-2">Filters</legend>
                                    <div class="flex flex-wrap -mx-2">
                                        <label class="w-1/2 px-2 flex items-center mb-2">
                                            <input type="checkbox" name="has_embeddings" value="true" class="mr-2">
                                            Has Embedding
                                        </label>
                                        <label class="w-1/2 px-2 flex items-center mb-2">
                                            <input type="checkbox" name="has_geocoding" value="true" class="mr-2">
                                            Has Geocoding
                                        </label>
                                        <label class="w-1/2 px-2 flex items-center mb-2">
                                            <input type="checkbox" name="has_entities" value="true" class="mr-2">
                                            Has Entities
                                        </label>
                                        <label class="w-1/2 px-2 flex items-center mb-2">
                                            <input type="checkbox" name="has_classification" value="true" class="mr-2">
                                            Has Classification
                                        </label>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap -mx-2">
                            <div class="w-full md:w-1/2 px-2 mb-4">
                                <label class="block font-semibold mb-2">Entity</label>
                                <input class="w-full bg-gray-700 text-white rounded px-4 py-2 focus:outline-none" type="text" name="entities" placeholder="Filter by entities (comma-separated)...">
                            </div>
                            <div class="w-full md:w-1/2 px-2 mb-4">
                                <label class="block font-semibold mb-2">Location</label>
                                <input class="w-full bg-gray-700 text-white rounded px-4 py-2 focus:outline-none" type="text" name="locations" placeholder="Filter by locations (comma-separated)...">
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap -mx-2">
                            <div class="w-full md:w-1/2 px-2 mb-4">
                                <label class="block font-semibold mb-2">Skip</label>
                                <input class="w-full bg-gray-700 text-white rounded px-4 py-2 focus:outline-none" type="number" name="skip" value="0" min="0">
                            </div>
                            <div class="w-full md:w-1/2 px-2 mb-4">
                                <label class="block font-semibold mb-2">Limit</label>
                                <input class="w-full bg-gray-700 text-white rounded px-4 py-2 focus:outline-none" type="number" name="limit" value="10" min="1">
                            </div>
                        </div>
                        
                        <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition duration-300" type="submit">
                            Search
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Search Results -->
        <div class="bg-card rounded-lg p-4 mb-6">
            <h2 class="text-xl font-semibold mb-4">Search Results</h2>
            <div id="search-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Search results will be loaded here -->
            </div>
        </div>

        <!-- Orchestration Steps and Other Sections Omitted for Brevity -->

        <!-- Scripts -->
        <script>
            function refreshPrefectDashboard() {
                const iframe = document.getElementById('prefect-dashboard');
                iframe.src = iframe.src;
            }

            // Refresh every 300 seconds (300000 milliseconds)
            setInterval(refreshPrefectDashboard, 300000);
        </script>
    </div>
</body>

</html>
